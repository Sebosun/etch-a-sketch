<!DOCTYPE html>
<link rel="stylesheet" href="style.css">
<html>
    <head>
        <title>Title</title>
    </head>
    
    <body>
    <h1>Etch a sketch</h1>
    <button id="reset">Reset</button>
    <button id="random">Random Colour</button>
    <button id="black">Reset Colour</button>
    <main>
        <div class="grid">
        </div>        
    </main>
    <script>
        let gridSize = 16;
        let colourMode = 'black';
        
        
        const grid = document.querySelector('.grid');
        const resetButton = document.querySelector("#reset");
        const randomColourButton = document.querySelector('#random');
        const blackColourButton = document.querySelector('#black');
        
        grid.style.cssText = `grid-template-columns: repeat(${gridSize}, 1fr)`;
        
        function generateGrid(size, mode, parent){
            parent.style.cssText = `grid-template-columns: repeat(${size}, 1fr)`;
            for (let i = 0; i < size ** 2; i++){
                let div = document.createElement('div');
            parent.appendChild(div);
            }
        }
        
        function getRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
              }
            return color;
        }        
        
        generateGrid(gridSize, '', grid);
        
        let sketch = document.querySelectorAll(".grid > div");
        sketch.forEach((square) =>{
           square.addEventListener('mouseenter', (e) => {
               console.log(square);
               square.setAttribute('style', `background: ${colourMode}`);
           });
        });
        
        resetButton.addEventListener('click', () =>{
            sketch.forEach((square) =>{
                grid.removeChild(square);
            });
            gridSize = prompt('Gimme the Grid Size 1-100');

            generateGrid(gridSize, '', grid);
            
            sketch = document.querySelectorAll(".grid > div");
            sketch.forEach((square) =>{
                square.addEventListener('mouseenter', (e) => {
                    console.log(square);
                    square.setAttribute('style', `background: ${colourMode}`);
                });
            });    
        });
        
        randomColourButton.addEventListener('click',() =>{
            sketch.forEach((square) =>{
                square.addEventListener('mouseenter', (e) => {
                    console.log(square);
                    square.setAttribute('style', `background: ${getRandomColor()}`);
                });
            });    
        });
    </script>
    </body>
</html>
